


<html>
<head>
    <link rel='stylesheet' type='text/css' href='style.css'>
    <script src="asset/jquery-2.1.4.js"></script>
    
    <script>
        $(document).ready(function() {
         var table = $("#mails");
         $.get('/mails/', function(array) {
           $.each(array, function(index, mail) {
               console.log(mail.seen);
               
               if(mail.seen == "true" ){
                   console.log("1");
                    table.append('<tr id="row' + index + '"><td>' + mail.subject + '</td></br><td>' + mail.from + '</td></tr>');
               }else{
                   console.log("2");
                   table.append('<tr id="row' + index + '"><td><b>' + mail.subject + '</b></td></br><td>' + mail.from + '</td></tr>');
               }
            });

           var detail = $("#detail");
           for(index in array) {
              (function(idx) {  // I hate JS !
                $("#row" + idx).click(function() {
                  $.get('/mails/' + idx, function(mail) {
                    detail.html('<h5>Subject: ' + mail.subject + '</h5><h5>From: ' + mail.from +'</h5><h5>Date: ' +mail.date+'</h5><h5>To: ' +mail.to+ '</h5><h6>' + mail.body + '</h6>');
                  });
                });
              })(index);
           }
         });
        });
    </script>
</head>
<body>
    <div id='navbar'>
        <div id='navbarleft'>
             <img src='img/irgmail.png'>
        </div>

        <div id='navbarright'>
            <form action="">
               Search: <input id="champ" type="text"/>
                <input type="submit">
            </form>
        </div>   
    </div> 

    <div id="wrapper">
        <div id="boxes" >
            <table>
                <tr><th>Boite de reception</th></tr>
                <tr><td><a href="envoi.php" class="lien1">Envoyer mail</a></td></tr>
                
                
            </table>
        </div>
        <div id="divmails">
            <table id="mails">
                <tr><th>Subject</th><th>From</th></tr>
            </table>
        </div>

        <div id="detail">

        </div>
    </div>
    
    
</body>
<footer></footer>

</html>
                    
